<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>

<body>
    <nav class="main-header__nav">
        <ul class="main-header__item-list">
            <li class="main-header__title"><a href="#">FPT Poly</a></li>
            <li class="main-header__item"><a href="/">Quản lý bài viết</a></li>
            <li class="main-header__item"><a href="add-post.html">Thêm bài viết</a></li>
        </ul>
    </nav>
    <div class="px-4" align="center" class="form-middle" ng-app="myApp" ng-controller="myController">
        <form ng-submit="submit($event)" class="product-form" action="#" method="POST" id="frm">
            <label>Tiêu đề</label>
            <br />
            <input type="text" name="title" ng-model="title" />
            <br />
            <label>Nội dung</label>
            <br />
            <textarea name="content" ng-model="content"></textarea>
            <br />
            <button type="submit" class="btn btn-primary">Thêm</button>
        </form>
    </div>
    <script>
        angular.module('myApp', [])
            .controller('myController', ($scope, $http) => {
 
                $scope.submit = function (e) {
                    e.preventDefault();

                    console.log($scope.title);
                    console.log($scope.content);

                    var data = JSON.stringify({
                        title: $scope.title,
                        content: $scope.content,
                        create_date: Date.now(),
                    })
                    $http.post("http://127.0.0.1:8000/blog/post", data).then((res) => {
                        window.location.href = "index.html";
                    })
                };
            });
    </script>
</body>

</html>